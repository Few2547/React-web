{"ast":null,"code":"var _jsxFileName = \"/Users/kanyawi/Desktop/continuing-project-01/react-resize/src/FileUploader.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport ImageDisplay from './components/ImageDisplay';\nimport MethodSelector from './components/MethodSelector';\nimport ProcessingOptions from './components/ProcessingOptions';\nimport ResizeControls from './components/ResizeControls';\nimport DownloadSection from './components/DownloadSection';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SHARPNESS_CONFIG = {\n  min: -2,\n  max: 2,\n  step: 0.1,\n  defaultValue: 0\n};\nconst NOISE_REDUCTION_CONFIG = {\n  min: 0.0,\n  max: 10.0,\n  step: 0.1,\n  defaultValue: 0\n};\nfunction FileUploader() {\n  _s();\n  const [file, setFile] = useState(null);\n  const [originalFile, setOriginalFile] = useState(null);\n  const [resizedFile, setResizedFile] = useState(null); // เพิ่ม state สำหรับไฟล์ที่ resize แล้ว\n  const [fileSizeKB, setFileSizeKB] = useState(0);\n  const [originalFileSizeKB, setOriginalFileSizeKB] = useState(0);\n  const [width, setWidth] = useState('');\n  const [height, setHeight] = useState('');\n  const [isLinked, setIsLinked] = useState(true);\n  const [aspectRatio, setAspectRatio] = useState(null);\n  const [method, setMethod] = useState('nearest');\n  const [showOriginal, setShowOriginal] = useState(true);\n  const [downloadFormat, setDownloadFormat] = useState(\"original\");\n  const [isDownloading, setIsDownloading] = useState(false);\n  const [sharpness, setSharpness] = useState(SHARPNESS_CONFIG.defaultValue);\n  const [noiseReduction, setNoiseReduction] = useState(NOISE_REDUCTION_CONFIG.defaultValue);\n  const [processedFile, setProcessedFile] = useState(null);\n  const [processedFileSizeKB, setProcessedFileSizeKB] = useState(0);\n  const [processingType, setProcessingType] = useState(null);\n  const [currentImageUrl, setCurrentImageUrl] = useState(null);\n  const [alertMessage, setAlertMessage] = useState('');\n  const [showOptions, setShowOptions] = useState(false);\n  const [showDownloadPopup, setShowDownloadPopup] = useState(false);\n  const [processingOptions, setProcessingOptions] = useState({\n    resize: true,\n    convert: false,\n    sharpen: false\n  });\n\n  // ฟังก์ชันคำนวณขนาดไฟล์\n  const calculateFileSizeKB = file => {\n    return file ? Math.round(file.size / 1024) : 0;\n  };\n  const handleFileChange = e => {\n    const selectedFile = e.target.files[0];\n    if (!selectedFile) return;\n    setFile(selectedFile);\n    setOriginalFile(selectedFile);\n    setResizedFile(null);\n    setProcessedFile(null);\n    setShowOriginal(true);\n    setDownloadFormat(\"original\");\n    setSharpness(SHARPNESS_CONFIG.defaultValue); // รีเซ็ต sharpness เป็น 0\n    setNoiseReduction(NOISE_REDUCTION_CONFIG.defaultValue); // รีเซ็ต sharpness เป็น 0\n    setProcessingOptions({\n      resize: true,\n      convert: false,\n      sharpen: false\n    });\n    const sizeKB = calculateFileSizeKB(selectedFile);\n    setFileSizeKB(sizeKB);\n    setOriginalFileSizeKB(sizeKB);\n    const img = new Image();\n    img.onload = () => {\n      const ratio = img.width / img.height;\n      setAspectRatio(ratio);\n      setWidth(img.width);\n      setHeight(img.height);\n      URL.revokeObjectURL(img.src); // ทำความสะอาด memory\n    };\n    img.src = URL.createObjectURL(selectedFile);\n  };\n  const handleWidthChange = e => {\n    const newWidth = parseInt(e.target.value);\n    if (isNaN(newWidth)) {\n      setWidth('');\n      return;\n    }\n    setWidth(newWidth);\n    if (isLinked && aspectRatio) {\n      setHeight(Math.round(newWidth / aspectRatio));\n    }\n  };\n  const handleHeightChange = e => {\n    const newHeight = parseInt(e.target.value);\n    if (isNaN(newHeight)) {\n      setHeight('');\n      return;\n    }\n    setHeight(newHeight);\n    if (isLinked && aspectRatio) {\n      setWidth(Math.round(newHeight * aspectRatio));\n    }\n  };\n  const handleResize = async () => {\n    setAlertMessage('');\n    if (!originalFile || !width || !height) {\n      alert('กรุณาเลือกไฟล์และระบุขนาด');\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append('file', originalFile);\n      formData.append('width', width);\n      formData.append('height', height);\n      if (downloadFormat !== \"original\") {\n        const format = downloadFormat.split('/')[1];\n        formData.append('target_format', format);\n      }\n      const response = await fetch(`http://localhost:8000/api/resize/${method}/`, {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Cache-Control': 'no-cache'\n        }\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'การประมวลผลล้มเหลว');\n      }\n      const data = await response.json();\n      const newImageUrl = `http://localhost:8000${data.url}?t=${Date.now()}`;\n      setCurrentImageUrl(newImageUrl);\n\n      // ดึงไฟล์ที่ resize แล้ว\n      const imageResp = await fetch(newImageUrl);\n      const blob = await imageResp.blob();\n      const newFile = new File([blob], `resized_${originalFile.name}`, {\n        type: blob.type\n      });\n      setResizedFile(newFile);\n      setFile(newFile);\n      setFileSizeKB(calculateFileSizeKB(newFile));\n      setShowOriginal(false);\n      setProcessingType('resize');\n      setSharpness(SHARPNESS_CONFIG.defaultValue); // รีเซ็ต sharpness เป็น 0\n      setNoiseReduction(NOISE_REDUCTION_CONFIG.defaultValue); // รีเซ็ต sharpness เป็น 0\n\n      // อัปเดตขนาดภาพใหม่\n      const img = new Image();\n      img.onload = () => {\n        setWidth(img.naturalWidth);\n        setHeight(img.naturalHeight);\n        setAspectRatio(img.naturalWidth / img.naturalHeight);\n        URL.revokeObjectURL(img.src);\n      };\n      img.src = newImageUrl;\n    } catch (err) {\n      console.error('Processing error:', err);\n      alert(`การประมวลผลล้มเหลว: ${err.message}`);\n    }\n  };\n  const handleSharpen = async (sharpnessValue = sharpness) => {\n    // ใช้ sharpnessValue ที่รับเข้ามาแทน sharpness\n    if (!resizedFile) {\n      setAlertMessage('กรุณาปรับขนาดภาพก่อนเพิ่มความคมชัด');\n      // setTimeout(() => setAlertMessage(''), 1500); // หายไปหลังจาก 1.2 วินาที\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append(\"sharpness\", sharpnessValue.toString()); // ใช้ sharpnessValue แทน sharpness\n\n      const response = await fetch(`http://localhost:8000/api/resize/${method}/sharpen`, {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Cache-Control': 'no-cache'\n        }\n      });\n\n      // ส่วนที่เหลือของโค้ดเหมือนเดิม...\n      const data = await response.json();\n      const sharpenedUrl = `http://localhost:8000${data.url}?t=${Date.now()}`;\n      setCurrentImageUrl(sharpenedUrl);\n\n      // ดึงไฟล์ที่ sharpen แล้ว\n      const imageResp = await fetch(sharpenedUrl);\n      const blob = await imageResp.blob();\n      const newFile = new File([blob], `sharpened_${resizedFile.name}`, {\n        type: blob.type\n      });\n      setProcessedFile(newFile);\n      setFile(newFile);\n      setProcessedFileSizeKB(calculateFileSizeKB(newFile));\n      setProcessingType('sharpen');\n      setShowOriginal(false);\n      const img = new Image();\n      img.onload = () => {\n        setWidth(img.naturalWidth);\n        setHeight(img.naturalHeight);\n        setAspectRatio(img.naturalWidth / img.naturalHeight);\n        URL.revokeObjectURL(img.src);\n      };\n      img.src = sharpenedUrl;\n    } catch (err) {\n      console.error('Sharpening error:', err);\n      alert(`การเพิ่มความคมชัดล้มเหลว: ${err.message}`);\n    }\n  };\n  const enhanceImage = async (noiseReductionValue = 0.0, autoDetect = true) => {\n    if (!resizedFile) {\n      setAlertMessage('กรุณาปรับขนาดหรือเพิ่มความคมชัดก่อนทำการปรับปรุงภาพ');\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append(\"noise_reduction\", noiseReductionValue.toString());\n      const response = await fetch(`http://localhost:8000/api/resize/${method}/enhance_image`, {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Cache-Control': 'no-cache'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(\"ไม่สามารถปรับปรุงภาพได้\");\n      }\n      const data = await response.json();\n      const enhancedUrl = `http://localhost:8000${data.url}?t=${Date.now()}`;\n      setCurrentImageUrl(enhancedUrl);\n\n      // โหลดไฟล์ใหม่ที่ถูก enhance\n      const imageResp = await fetch(enhancedUrl);\n      const blob = await imageResp.blob();\n      const newFile = new File([blob], `enhanced_${resizedFile === null || resizedFile === void 0 ? void 0 : resizedFile.name}`, {\n        type: blob.type\n      });\n      setProcessedFile(newFile);\n      setFile(newFile);\n      setProcessedFileSizeKB(calculateFileSizeKB(newFile));\n      setProcessingType('enhance');\n      setShowOriginal(false);\n      const img = new Image();\n      img.onload = () => {\n        setWidth(img.naturalWidth);\n        setHeight(img.naturalHeight);\n        setAspectRatio(img.naturalWidth / img.naturalHeight);\n        URL.revokeObjectURL(img.src);\n      };\n      img.src = enhancedUrl;\n    } catch (err) {\n      console.error('Enhance image error:', err);\n      alert(`การปรับปรุงภาพล้มเหลว: ${err.message}`);\n    }\n  };\n  const toggleShowOriginal = () => {\n    setShowOriginal(!showOriginal);\n    if (showOriginal) {\n      setFileSizeKB(calculateFileSizeKB(file));\n    } else {\n      setFileSizeKB(originalFileSizeKB);\n    }\n  };\n  const handleDownload = async () => {\n    if (!file) return;\n    setIsDownloading(true);\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      const isOriginal = downloadFormat === 'original';\n      const endpoint = isOriginal ? '/' : '/convert';\n      if (width) formData.append('width', width);\n      if (height) formData.append('height', height);\n      if (!isOriginal) {\n        const format = downloadFormat.split('/')[1];\n        formData.append('target_format', format);\n      }\n\n      // เพิ่ม timestamp เพื่อป้องกัน cache\n      const timestamp = Date.now();\n      const response = await fetch(`http://localhost:8000/api/resize/${method}${endpoint}?t=${timestamp}`, {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Cache-Control': 'no-cache'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Server error');\n      }\n      const result = await response.json();\n\n      // เพิ่ม timestamp สำหรับการโหลดไฟล์\n      const downloadResponse = await fetch(`http://localhost:8000${result.url}?t=${timestamp}`, {\n        cache: 'no-store'\n      });\n      if (!downloadResponse.ok) {\n        throw new Error('Failed to fetch processed image');\n      }\n      const blob = await downloadResponse.blob();\n      const downloadUrl = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = result.filename || `download.${result.used_extension || 'jpg'}`;\n      document.body.appendChild(link);\n      link.click();\n\n      // ทำความสะอาดหลังจากดาวน์โหลด\n      setTimeout(() => {\n        document.body.removeChild(link);\n        URL.revokeObjectURL(downloadUrl);\n      }, 100);\n    } catch (error) {\n      console.error('Download error:', error);\n      alert('ดาวน์โหลดล้มเหลว: ' + (error.message || 'เกิดข้อผิดพลาดไม่ทราบสาเหตุ'));\n    } finally {\n      setIsDownloading(false);\n    }\n  };\n  const toggleProcessingOption = option => {\n    setProcessingOptions(prev => ({\n      ...prev,\n      [option]: !prev[option]\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid grid-cols-4 grid-rows-5 h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(ImageDisplay, {\n      file: file,\n      originalFile: originalFile,\n      processedFile: processedFile,\n      showOriginal: showOriginal,\n      fileSizeKB: showOriginal ? originalFileSizeKB : fileSizeKB,\n      processedFileSizeKB: processedFileSizeKB,\n      handleFileChange: handleFileChange,\n      processingType: processingType,\n      currentImageUrl: currentImageUrl // ส่ง currentImageUrl ไป\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `md:hidden fixed top-40 z-50 bg-[#00969D] text-white px-4 py-2 rounded shadow-lg transition-all duration-300 ${showOptions ? 'left-4' : 'right-4'}`,\n      onClick: () => setShowOptions(!showOptions),\n      children: showOptions ? 'ปิดตัวเลือก' : 'เปิดตัวเลือก'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `\n          fixed top-0 right-0 h-full w-64 bg-[#292C31] text-gray-300 overflow-y-auto z-40\n          p-4 transition-transform duration-300 ease-in-out\n          ${showOptions ? 'translate-x-0' : 'translate-x-full'}\n          md:static md:translate-x-0 md:w-full md:col-start-4 md:col-span-2 md:row-span-5 md:p-3\n          flex flex-col\n        `,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-[#24262b] p-3 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-[#00969D]\",\n          children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01 \\u0E1B\\u0E23\\u0E31\\u0E1A\\u0E02\\u0E19\\u0E32\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MethodSelector, {\n        method: method,\n        setMethod: setMethod,\n        originalFile: originalFile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProcessingOptions, {\n        processingOptions: processingOptions,\n        toggleProcessingOption: toggleProcessingOption,\n        originalFile: originalFile,\n        sharpness: sharpness,\n        setSharpness: setSharpness,\n        handleSharpen: handleSharpen,\n        enhanceImage: enhanceImage,\n        noiseReduction: noiseReduction,\n        setNoiseReduction: setNoiseReduction\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ResizeControls, {\n        width: width,\n        height: height,\n        handleWidthChange: handleWidthChange,\n        handleHeightChange: handleHeightChange,\n        isLinked: isLinked,\n        setIsLinked: setIsLinked,\n        originalFile: originalFile,\n        processingOptions: processingOptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-2\",\n        children: [alertMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4 p-2 bg-yellow-100 text-yellow-800 rounded\",\n          children: alertMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DownloadSection, {\n          file: file,\n          originalFile: originalFile,\n          handleResize: handleResize,\n          showOriginal: showOriginal,\n          handleDownload: handleDownload,\n          isDownloading: isDownloading,\n          downloadFormat: downloadFormat,\n          setDownloadFormat: setDownloadFormat,\n          width: width,\n          height: height,\n          processingOptions: processingOptions,\n          sharpness: sharpness,\n          noiseReduction: noiseReduction,\n          aspectRatio: aspectRatio,\n          toggleShowOriginal: toggleShowOriginal,\n          currentImageUrl: currentImageUrl,\n          onOpenPopup: () => setShowDownloadPopup(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 7\n    }, this), showDownloadPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",\n      onClick: () => setShowDownloadPopup(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-[#1E1F23] rounded-lg py-6 px-4 w-full max-w-7xl border border-[#292c31] shadow-xl relative overflow-y-auto max-h-[90vh]\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowDownloadPopup(false),\n          className: \"absolute top-3 right-3 text-gray-400 hover:text-white p-1 rounded-full hover:bg-[#383c43]\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"20\",\n            height: \"20\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [/*#__PURE__*/_jsxDEV(\"line\", {\n              x1: \"18\",\n              y1: \"6\",\n              x2: \"6\",\n              y2: \"18\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n              x1: \"6\",\n              y1: \"6\",\n              x2: \"18\",\n              y2: \"18\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 lg:grid-cols-5 h-full gap-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:col-span-4 w-full flex items-center justify-center\",\n            children: currentImageUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: currentImageUrl,\n              alt: \"preview\",\n              className: \"max-h-[50vh] sm:max-h-[65vh] lg:max-h-[85vh] w-auto rounded border border-[#292c31] object-contain\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:col-span-1 w-full flex flex-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-white mb-4\",\n              children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01 Download\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: downloadFormat,\n              onChange: e => setDownloadFormat(e.target.value),\n              className: \"w-full py-3 rounded-lg bg-[#383c43] border border-[#292c31] text-white mb-4 \",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"original\",\n                children: \"\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25\\u0E15\\u0E49\\u0E19\\u0E09\\u0E1A\\u0E31\\u0E1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"image/jpeg\",\n                children: \"JPEG (.jpg)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"image/png\",\n                children: \"PNG (.png)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"image/webp\",\n                children: \"WEBP (.webp)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleDownload,\n              disabled: isDownloading,\n              className: `w-full py-3 rounded-lg font-medium mb-4 ${isDownloading ? 'bg-[#24262B]/50 text-gray-500 cursor-not-allowed' : 'bg-[#00969D] text-white hover:bg-[#007980]'}`,\n              children: isDownloading ? 'Downloading...' : 'Download'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 bg-[#24262B] border border-[#24262B] text-gray-400 text-sm rounded-lg\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-gray-300\",\n                  children: \"\\u0E02\\u0E19\\u0E32\\u0E14 :\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 21\n                }, this), \" \", width, \" \\xD7 \", height, \" px\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 100\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-gray-300\",\n                  children: \"\\u0E2D\\u0E31\\u0E15\\u0E23\\u0E32\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E20\\u0E32\\u0E1E :\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 21\n                }, this), \" \", aspectRatio ? aspectRatio.toFixed(2) : 'N/A', sharpness !== 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium text-gray-300\",\n                    children: \"\\u0E23\\u0E30\\u0E14\\u0E31\\u0E1A\\u0E04\\u0E27\\u0E32\\u0E21\\u0E04\\u0E21\\u0E0A\\u0E31\\u0E14 :\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 31\n                  }, this), \" \", sharpness.toFixed(1)]\n                }, void 0, true), noiseReduction !== 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 531,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium text-gray-300\",\n                    children: \"\\u0E23\\u0E30\\u0E14\\u0E31\\u0E1A\\u0E01\\u0E32\\u0E23\\u0E25\\u0E14\\u0E19\\u0E2D\\u0E22\\u0E0B\\u0E4C :\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 531,\n                    columnNumber: 31\n                  }, this), \" \", noiseReduction.toFixed(1)]\n                }, void 0, true)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 519,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 370,\n    columnNumber: 5\n  }, this);\n}\n_s(FileUploader, \"LUoLuHVqaTEdNzNSmxz45uI+yq0=\");\n_c = FileUploader;\nexport default FileUploader;\nvar _c;\n$RefreshReg$(_c, \"FileUploader\");","map":{"version":3,"names":["React","useState","ImageDisplay","MethodSelector","ProcessingOptions","ResizeControls","DownloadSection","jsxDEV","_jsxDEV","Fragment","_Fragment","SHARPNESS_CONFIG","min","max","step","defaultValue","NOISE_REDUCTION_CONFIG","FileUploader","_s","file","setFile","originalFile","setOriginalFile","resizedFile","setResizedFile","fileSizeKB","setFileSizeKB","originalFileSizeKB","setOriginalFileSizeKB","width","setWidth","height","setHeight","isLinked","setIsLinked","aspectRatio","setAspectRatio","method","setMethod","showOriginal","setShowOriginal","downloadFormat","setDownloadFormat","isDownloading","setIsDownloading","sharpness","setSharpness","noiseReduction","setNoiseReduction","processedFile","setProcessedFile","processedFileSizeKB","setProcessedFileSizeKB","processingType","setProcessingType","currentImageUrl","setCurrentImageUrl","alertMessage","setAlertMessage","showOptions","setShowOptions","showDownloadPopup","setShowDownloadPopup","processingOptions","setProcessingOptions","resize","convert","sharpen","calculateFileSizeKB","Math","round","size","handleFileChange","e","selectedFile","target","files","sizeKB","img","Image","onload","ratio","URL","revokeObjectURL","src","createObjectURL","handleWidthChange","newWidth","parseInt","value","isNaN","handleHeightChange","newHeight","handleResize","alert","formData","FormData","append","format","split","response","fetch","body","headers","ok","errorData","json","Error","detail","data","newImageUrl","url","Date","now","imageResp","blob","newFile","File","name","type","naturalWidth","naturalHeight","err","console","error","message","handleSharpen","sharpnessValue","toString","sharpenedUrl","enhanceImage","noiseReductionValue","autoDetect","enhancedUrl","toggleShowOriginal","handleDownload","isOriginal","endpoint","timestamp","result","downloadResponse","cache","downloadUrl","link","document","createElement","href","download","filename","used_extension","appendChild","click","setTimeout","removeChild","toggleProcessingOption","option","prev","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onOpenPopup","stopPropagation","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","alt","onChange","disabled","toFixed","_c","$RefreshReg$"],"sources":["/Users/kanyawi/Desktop/continuing-project-01/react-resize/src/FileUploader.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport ImageDisplay from './components/ImageDisplay';\nimport MethodSelector from './components/MethodSelector';\nimport ProcessingOptions from './components/ProcessingOptions';\nimport ResizeControls from './components/ResizeControls';\nimport DownloadSection from './components/DownloadSection';\n\nconst SHARPNESS_CONFIG = {\n  min: -2,\n  max: 2,\n  step: 0.1,\n  defaultValue: 0\n};\n\nconst NOISE_REDUCTION_CONFIG = {\n  min: 0.0,\n  max: 10.0,\n  step: 0.1,\n  defaultValue: 0\n};\n\nfunction FileUploader() {\n  const [file, setFile] = useState(null);\n  const [originalFile, setOriginalFile] = useState(null);\n  const [resizedFile, setResizedFile] = useState(null); // เพิ่ม state สำหรับไฟล์ที่ resize แล้ว\n  const [fileSizeKB, setFileSizeKB] = useState(0);\n  const [originalFileSizeKB, setOriginalFileSizeKB] = useState(0);\n  const [width, setWidth] = useState('');\n  const [height, setHeight] = useState('');\n  const [isLinked, setIsLinked] = useState(true);\n  const [aspectRatio, setAspectRatio] = useState(null);\n  const [method, setMethod] = useState('nearest');\n  const [showOriginal, setShowOriginal] = useState(true);\n  const [downloadFormat, setDownloadFormat] = useState(\"original\");\n  const [isDownloading, setIsDownloading] = useState(false);\n  const [sharpness, setSharpness] = useState(SHARPNESS_CONFIG.defaultValue);\n  const [noiseReduction, setNoiseReduction] = useState(NOISE_REDUCTION_CONFIG.defaultValue);\n  const [processedFile, setProcessedFile] = useState(null);\n  const [processedFileSizeKB, setProcessedFileSizeKB] = useState(0);\n  const [processingType, setProcessingType] = useState(null);\n  const [currentImageUrl, setCurrentImageUrl] = useState(null);\n  const [alertMessage, setAlertMessage] = useState('');\n  const [showOptions, setShowOptions] = useState(false);\n  const [showDownloadPopup, setShowDownloadPopup] = useState(false);\n\n\n\n  const [processingOptions, setProcessingOptions] = useState({\n    resize: true,\n    convert: false,\n    sharpen: false\n  });\n\n  // ฟังก์ชันคำนวณขนาดไฟล์\n  const calculateFileSizeKB = (file) => {\n    return file ? Math.round(file.size / 1024) : 0;\n  };\n\n  const handleFileChange = (e) => {\n    const selectedFile = e.target.files[0];\n    if (!selectedFile) return;\n\n    setFile(selectedFile);\n    setOriginalFile(selectedFile);\n    setResizedFile(null);\n    setProcessedFile(null);\n    setShowOriginal(true);\n    setDownloadFormat(\"original\");\n    setSharpness(SHARPNESS_CONFIG.defaultValue); // รีเซ็ต sharpness เป็น 0\n    setNoiseReduction(NOISE_REDUCTION_CONFIG.defaultValue); // รีเซ็ต sharpness เป็น 0\n    setProcessingOptions({\n      resize: true,\n      convert: false,\n      sharpen: false\n    });\n\n    const sizeKB = calculateFileSizeKB(selectedFile);\n    setFileSizeKB(sizeKB);\n    setOriginalFileSizeKB(sizeKB);\n    \n    const img = new Image();\n    img.onload = () => {\n      const ratio = img.width / img.height;\n      setAspectRatio(ratio);\n      setWidth(img.width);\n      setHeight(img.height);\n      URL.revokeObjectURL(img.src); // ทำความสะอาด memory\n    };\n    img.src = URL.createObjectURL(selectedFile);\n  };\n\n  const handleWidthChange = (e) => {\n    const newWidth = parseInt(e.target.value);\n    if (isNaN(newWidth)) {\n      setWidth('');\n      return;\n    }\n    setWidth(newWidth);\n    if (isLinked && aspectRatio) {\n      setHeight(Math.round(newWidth / aspectRatio));\n    }\n  };\n\n  const handleHeightChange = (e) => {\n    const newHeight = parseInt(e.target.value);\n    if (isNaN(newHeight)) {\n      setHeight('');\n      return;\n    }\n    setHeight(newHeight);\n    if (isLinked && aspectRatio) {\n      setWidth(Math.round(newHeight * aspectRatio));\n    }\n  };\n\n  const handleResize = async () => {\n  setAlertMessage('');\n\n    if (!originalFile || !width || !height) {\n      alert('กรุณาเลือกไฟล์และระบุขนาด');\n      return;\n    }\n\n    try {\n      const formData = new FormData();\n      formData.append('file', originalFile);\n      formData.append('width', width);\n      formData.append('height', height);\n\n      if (downloadFormat !== \"original\") {\n        const format = downloadFormat.split('/')[1];\n        formData.append('target_format', format);\n      }\n\n      const response = await fetch(`http://localhost:8000/api/resize/${method}/`, {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Cache-Control': 'no-cache'\n        }\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'การประมวลผลล้มเหลว');\n      }\n\n      const data = await response.json();\n      const newImageUrl = `http://localhost:8000${data.url}?t=${Date.now()}`;\n      setCurrentImageUrl(newImageUrl);\n\n      // ดึงไฟล์ที่ resize แล้ว\n      const imageResp = await fetch(newImageUrl);\n      const blob = await imageResp.blob();\n      const newFile = new File([blob], `resized_${originalFile.name}`, { type: blob.type });\n\n      setResizedFile(newFile);\n      setFile(newFile);\n      setFileSizeKB(calculateFileSizeKB(newFile));\n      setShowOriginal(false);\n      setProcessingType('resize');\n      setSharpness(SHARPNESS_CONFIG.defaultValue); // รีเซ็ต sharpness เป็น 0\n      setNoiseReduction(NOISE_REDUCTION_CONFIG.defaultValue); // รีเซ็ต sharpness เป็น 0\n\n      // อัปเดตขนาดภาพใหม่\n      const img = new Image();\n      img.onload = () => {\n        setWidth(img.naturalWidth);\n        setHeight(img.naturalHeight);\n        setAspectRatio(img.naturalWidth / img.naturalHeight);\n        URL.revokeObjectURL(img.src);\n      };\n      img.src = newImageUrl;\n\n    } catch (err) {\n      console.error('Processing error:', err);\n      alert(`การประมวลผลล้มเหลว: ${err.message}`);\n    }\n  };\n\nconst handleSharpen = async (sharpnessValue = sharpness) => {\n  // ใช้ sharpnessValue ที่รับเข้ามาแทน sharpness\n  if (!resizedFile) {\n    setAlertMessage('กรุณาปรับขนาดภาพก่อนเพิ่มความคมชัด');\n    // setTimeout(() => setAlertMessage(''), 1500); // หายไปหลังจาก 1.2 วินาที\n    return;\n  }\n\n  try {\n    const formData = new FormData();\n    formData.append(\"sharpness\", sharpnessValue.toString()); // ใช้ sharpnessValue แทน sharpness\n\n    const response = await fetch(`http://localhost:8000/api/resize/${method}/sharpen`, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Cache-Control': 'no-cache'\n      }\n    });\n\n    // ส่วนที่เหลือของโค้ดเหมือนเดิม...\n    const data = await response.json();\n    const sharpenedUrl = `http://localhost:8000${data.url}?t=${Date.now()}`;\n    setCurrentImageUrl(sharpenedUrl);\n\n    // ดึงไฟล์ที่ sharpen แล้ว\n    const imageResp = await fetch(sharpenedUrl);\n    const blob = await imageResp.blob();\n    const newFile = new File([blob], `sharpened_${resizedFile.name}`, { type: blob.type });\n\n    setProcessedFile(newFile);\n    setFile(newFile);\n    setProcessedFileSizeKB(calculateFileSizeKB(newFile));\n    setProcessingType('sharpen');\n    setShowOriginal(false);\n\n    const img = new Image();\n    img.onload = () => {\n      setWidth(img.naturalWidth);\n      setHeight(img.naturalHeight);\n      setAspectRatio(img.naturalWidth / img.naturalHeight);\n      URL.revokeObjectURL(img.src);\n    };\n    img.src = sharpenedUrl;\n\n  } catch (err) {\n    console.error('Sharpening error:', err);\n    alert(`การเพิ่มความคมชัดล้มเหลว: ${err.message}`);\n  }\n};\n\nconst enhanceImage = async (noiseReductionValue = 0.0, autoDetect = true) => {\n  if (!resizedFile) {\n    setAlertMessage('กรุณาปรับขนาดหรือเพิ่มความคมชัดก่อนทำการปรับปรุงภาพ');\n    return;\n  }\n\n  try {\n    const formData = new FormData();\n    formData.append(\"noise_reduction\", noiseReductionValue.toString());\n\n    const response = await fetch(`http://localhost:8000/api/resize/${method}/enhance_image`, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Cache-Control': 'no-cache'\n      }\n    });\n\n    if (!response.ok) {\n      throw new Error(\"ไม่สามารถปรับปรุงภาพได้\");\n    }\n\n    const data = await response.json();\n    const enhancedUrl = `http://localhost:8000${data.url}?t=${Date.now()}`;\n    setCurrentImageUrl(enhancedUrl);\n\n    // โหลดไฟล์ใหม่ที่ถูก enhance\n    const imageResp = await fetch(enhancedUrl);\n    const blob = await imageResp.blob();\n    const newFile = new File([blob], `enhanced_${resizedFile?.name}`, { type: blob.type });\n\n    setProcessedFile(newFile);\n    setFile(newFile);\n    setProcessedFileSizeKB(calculateFileSizeKB(newFile));\n    setProcessingType('enhance');\n    setShowOriginal(false);\n\n    const img = new Image();\n    img.onload = () => {\n      setWidth(img.naturalWidth);\n      setHeight(img.naturalHeight);\n      setAspectRatio(img.naturalWidth / img.naturalHeight);\n      URL.revokeObjectURL(img.src);\n    };\n    img.src = enhancedUrl;\n\n  } catch (err) {\n    console.error('Enhance image error:', err);\n    alert(`การปรับปรุงภาพล้มเหลว: ${err.message}`);\n  }\n};\n\n\n  const toggleShowOriginal = () => {\n    setShowOriginal(!showOriginal);\n    if (showOriginal) {\n      setFileSizeKB(calculateFileSizeKB(file));\n    } else {\n      setFileSizeKB(originalFileSizeKB);\n    }\n  };\n\nconst handleDownload = async () => {\n  if (!file) return;\n  \n  setIsDownloading(true);\n  \n  try {\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    const isOriginal = downloadFormat === 'original';\n    const endpoint = isOriginal ? '/' : '/convert';\n    \n    if (width) formData.append('width', width);\n    if (height) formData.append('height', height);\n    \n    if (!isOriginal) {\n      const format = downloadFormat.split('/')[1];\n      formData.append('target_format', format);\n    }\n\n    // เพิ่ม timestamp เพื่อป้องกัน cache\n    const timestamp = Date.now();\n    const response = await fetch(`http://localhost:8000/api/resize/${method}${endpoint}?t=${timestamp}`, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Cache-Control': 'no-cache'\n      }\n    });\n\n    if (!response.ok) {\n      throw new Error('Server error');\n    }\n\n    const result = await response.json();\n    \n    // เพิ่ม timestamp สำหรับการโหลดไฟล์\n    const downloadResponse = await fetch(`http://localhost:8000${result.url}?t=${timestamp}`, {\n      cache: 'no-store'\n    });\n    \n    if (!downloadResponse.ok) {\n      throw new Error('Failed to fetch processed image');\n    }\n\n    const blob = await downloadResponse.blob();\n\n    const downloadUrl = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = downloadUrl;\n    link.download = result.filename || `download.${result.used_extension || 'jpg'}`;\n    document.body.appendChild(link);\n    link.click();\n    \n    // ทำความสะอาดหลังจากดาวน์โหลด\n    setTimeout(() => {\n      document.body.removeChild(link);\n      URL.revokeObjectURL(downloadUrl);\n    }, 100);\n\n  } catch (error) {\n    console.error('Download error:', error);\n    alert('ดาวน์โหลดล้มเหลว: ' + (error.message || 'เกิดข้อผิดพลาดไม่ทราบสาเหตุ'));\n  } finally {\n    setIsDownloading(false);\n  }\n};\n\n  const toggleProcessingOption = (option) => {\n    setProcessingOptions(prev => ({\n      ...prev,\n      [option]: !prev[option]\n    }));\n  };\n\n  return (\n    <div className=\"grid grid-cols-4 grid-rows-5 h-screen\">\n    <ImageDisplay\n      file={file}\n      originalFile={originalFile}\n      processedFile={processedFile}\n      showOriginal={showOriginal}\n      fileSizeKB={showOriginal ? originalFileSizeKB : fileSizeKB}\n      processedFileSizeKB={processedFileSizeKB}\n      handleFileChange={handleFileChange}\n      processingType={processingType}\n      currentImageUrl={currentImageUrl} // ส่ง currentImageUrl ไป\n    />\n\n      <button\n        className={`md:hidden fixed top-40 z-50 bg-[#00969D] text-white px-4 py-2 rounded shadow-lg transition-all duration-300 ${\n          showOptions ? 'left-4' : 'right-4'\n        }`}\n        onClick={() => setShowOptions(!showOptions)}\n      >\n        {showOptions ? 'ปิดตัวเลือก' : 'เปิดตัวเลือก'}\n      </button>\n\n      <div\n        className={`\n          fixed top-0 right-0 h-full w-64 bg-[#292C31] text-gray-300 overflow-y-auto z-40\n          p-4 transition-transform duration-300 ease-in-out\n          ${showOptions ? 'translate-x-0' : 'translate-x-full'}\n          md:static md:translate-x-0 md:w-full md:col-start-4 md:col-span-2 md:row-span-5 md:p-3\n          flex flex-col\n        `}\n      >\n        <div className=\"bg-[#24262b] p-3 mb-4\">\n          <h2 className=\"text-xl font-semibold text-[#00969D]\">ตัวเลือก ปรับขนาด</h2>\n        </div>\n\n        <MethodSelector \n          method={method}\n          setMethod={setMethod}\n          originalFile={originalFile}\n        />\n\n        <ProcessingOptions \n          processingOptions={processingOptions}\n          toggleProcessingOption={toggleProcessingOption}\n          originalFile={originalFile}\n          sharpness={sharpness}\n          setSharpness={setSharpness}\n          handleSharpen={handleSharpen}\n          enhanceImage={enhanceImage}\n          noiseReduction={noiseReduction}\n          setNoiseReduction={setNoiseReduction}\n        />\n\n        <ResizeControls \n          width={width}\n          height={height}\n          handleWidthChange={handleWidthChange}\n          handleHeightChange={handleHeightChange}\n          isLinked={isLinked}\n          setIsLinked={setIsLinked}\n          originalFile={originalFile}\n          processingOptions={processingOptions}\n        />\n        \n        <div className=\"p-2\">\n          {alertMessage && (\n            <div className=\"mb-4 p-2 bg-yellow-100 text-yellow-800 rounded\">\n              {alertMessage}\n            </div>\n          )}\n        <DownloadSection\n          file={file}\n          originalFile={originalFile}\n          handleResize={handleResize}\n          showOriginal={showOriginal}\n          handleDownload={handleDownload}\n          isDownloading={isDownloading}\n          downloadFormat={downloadFormat}\n          setDownloadFormat={setDownloadFormat}\n          width={width}\n          height={height}\n          processingOptions={processingOptions}\n          sharpness={sharpness}\n          noiseReduction={noiseReduction}\n          aspectRatio={aspectRatio}\n          toggleShowOriginal={toggleShowOriginal}\n          currentImageUrl={currentImageUrl}\n          onOpenPopup={() => setShowDownloadPopup(true)}\n        />\n        </div>\n      </div>\n      \n      {showDownloadPopup && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n          onClick={() => setShowDownloadPopup(false)}\n        >\n          <div \n            className=\"bg-[#1E1F23] rounded-lg py-6 px-4 w-full max-w-7xl border border-[#292c31] shadow-xl relative overflow-y-auto max-h-[90vh]\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <button \n              onClick={() => setShowDownloadPopup(false)}\n              className=\"absolute top-3 right-3 text-gray-400 hover:text-white p-1 rounded-full hover:bg-[#383c43]\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n              </svg>\n            </button>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-5 h-full gap-6\">\n              <div className=\"lg:col-span-4 w-full flex items-center justify-center\">\n                {currentImageUrl && (\n                  <img \n                    src={currentImageUrl} \n                    alt=\"preview\"\n                    className=\"max-h-[50vh] sm:max-h-[65vh] lg:max-h-[85vh] w-auto rounded border border-[#292c31] object-contain\"\n                  />\n                )}\n              </div>\n\n              <div className=\"lg:col-span-1 w-full flex flex-col\">\n                <h3 className=\"text-lg font-medium text-white mb-4\">ตัวเลือก Download</h3>\n\n                <select\n                  value={downloadFormat}\n                  onChange={(e) => setDownloadFormat(e.target.value)}\n                  className=\"w-full py-3 rounded-lg bg-[#383c43] border border-[#292c31] text-white mb-4 \"\n                >\n                  <option value=\"original\">นามสกุลต้นฉบับ</option>\n                  <option value=\"image/jpeg\">JPEG (.jpg)</option>\n                  <option value=\"image/png\">PNG (.png)</option>\n                  <option value=\"image/webp\">WEBP (.webp)</option>\n                </select>\n\n                <button\n                  onClick={handleDownload}\n                  disabled={isDownloading}\n                  className={`w-full py-3 rounded-lg font-medium mb-4 ${\n                    isDownloading \n                      ? 'bg-[#24262B]/50 text-gray-500 cursor-not-allowed' \n                      : 'bg-[#00969D] text-white hover:bg-[#007980]'\n                  }`}\n                >\n                  {isDownloading ? 'Downloading...' : 'Download'}\n                </button>\n\n                <div className=\"p-3 bg-[#24262B] border border-[#24262B] text-gray-400 text-sm rounded-lg\">\n                  <p>\n                    <span className=\"font-medium text-gray-300\">ขนาด :</span> {width} × {height} px<br />\n                    <span className=\"font-medium text-gray-300\">อัตราส่วนภาพ :</span> {aspectRatio ? aspectRatio.toFixed(2) : 'N/A'}\n\n                    {sharpness !== 0 && (\n                      <>\n                        <br /><span className=\"font-medium text-gray-300\">ระดับความคมชัด :</span> {sharpness.toFixed(1)}\n                      </>\n                    )}\n\n                    {noiseReduction !== 0 && (\n                      <>\n                        <br /><span className=\"font-medium text-gray-300\">ระดับการลดนอยซ์ :</span> {noiseReduction.toFixed(1)}\n                      </>\n                    )}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n    </div>\n  );\n}\n\nexport default FileUploader;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}